<tr class="{{efm_id}} {{super_class}}{% if efm_id in S.gr_id2efm_ids %} {{header_class}} secret{% endif %}
 {{color_class}}{% if hidden%} hidden {%endif%}">
    <td title="{{p_id2tooltip[efm_id]}}">{{efm_id}}</td>
    {% for r_id in S.r_ids %}
        <td {% if r_id in S.gr_id2r_id2c %} class="secret {{r_id}} clicable" {% endif %}
                title="{{r_id}} in {{efm_id}}">
            {% if S.V[S.r_id2i[r_id], S.efm_id2i[efm_id]] %}{{S.V[S.r_id2i[r_id], S.efm_id2i[efm_id]]}}{% endif %}
        </td>
        {% if r_id in S.gr_id2r_id2c %}
            {% for sub_r_id in S.gr_id2r_id2c[r_id].keys()%}
                <td class="{{sub_r_id}} hidden sub_r sub_{{r_id}}{% if sub_r_id in S.gr_id2r_id2c %} secret subclicable{% endif %}"
                        title="{{sub_r_id}} in {{efm_id}}">
                    {% if S.V[S.r_id2i[sub_r_id], S.efm_id2i[efm_id]] %}{{S.V[S.r_id2i[sub_r_id], S.efm_id2i[efm_id]]}}{% endif %}
                </td>
                {% if sub_r_id in S.gr_id2r_id2c %}
                    {% for sub_sub_r_id in S.gr_id2r_id2c[sub_r_id].keys()%}
                        <td class="{{sub_sub_r_id}} hidden sub_sub_r sub_r sub_{{sub_r_id}}"
                                title="{{sub_sub_r_id}} in {{efm_id}}">
                            {% if S.V[S.r_id2i[sub_sub_r_id], S.efm_id2i[efm_id]] %}{{S.V[S.r_id2i[sub_sub_r_id], S.efm_id2i[efm_id]]}}{% endif %}
                        </td>
                    {% endfor %}
                {% endif %}
            {% endfor %}
        {% endif %}
    {% endfor %}
</tr>
{% if efm_id in S.gr_id2efm_ids %}
    {% for sub_efm_id in S.gr_id2efm_ids[efm_id] %}
        {{efm_id2tr[sub_efm_id]}}
    {% endfor %}
{% endif %}